{
  "version": "2.0.0",
  "inputs": [
    {
      "description": ".helm/<Project>",
      "type": "promptString",
      "default": "service",
      "id": "project"
    },
    {
      "description": ".helm/.helm-values/values.<Branch>.yaml",
      "type": "promptString",
      "default": "main",
      "id": "branch"
    },
    {
      "description": "CAREFUL - Branch name to override",
      "type": "promptString",
      "default": "",
      "id": "branch-to-override"
    },
    {
      "description": "CAREFUL - Branch name to copy from",
      "type": "promptString",
      "default": "",
      "id": "branch-to-copy"
    },
    {
      "id": "confirmation",
      "type": "promptString",
      "description": "CAREFUL !!!! You will override a branch on the remote, this is irreversible. Type 'agree' to continue",
      "default": ""
    }
  ],
  "tasks": [
    //
    //
    //
    {
      "label": "Generate Bundle",
      "command": "bun",
      "args": ["build:dev"],
      "options": {
        "cwd": "${workspaceFolder}/service"
      },
      "hide": true,
      "problemMatcher": []
    },
    {
      "label": "Generate Migration",
      "command": "bun",
      "args": ["create-migration"],
      "options": {
        "cwd": "${workspaceFolder}/service"
      },
      "problemMatcher": []
    },
    //
    //
    //
    {
      "label": "ü™ñ Test helm chart",
      "command": "helm",
      "args": [
        "template",
        "${input:project}",
        "-f",
        ".helm-values/values.${input:branch}.yaml",
        "--debug"
      ],
      "options": {
        "cwd": "${workspaceFolder}/.helm"
      },
      "problemMatcher": []
    },
    {
      "label": "üß∂ Lint",
      "type": "shell",
      "command": "bun",
      "args": ["run", "lint"],
      "problemMatcher": ["$tsc", "$eslint-stylish"],
      "options": {
        "cwd": "${workspaceFolder}/service"
      }
    },
    {
      "label": "‚ö†Ô∏è Override branch with another",
      "type": "shell",
      "command": "if [ \"${input:confirmation}\" = \"agree\" ]; then git checkout ${input:branch-to-override} -- && git reset --hard ${input:branch-to-copy} -- && git push --force; else echo 'Did not agree explicitely'; exit 0; fi",
      "problemMatcher": [],
      "options": {
        "statusbar": { "hide": true }
      }
    }
  ]
}
